<!-- healthcare/templates/new_blood_data.html -->

{% extends 'base.html' %}
{% include './partials/_menu.html' %}


{% block main %}
<main>
    <div class="container-fluid py-4">
        <h2 class="mb-4">Analyses sanguines - {{ patient.first_name }} {{ patient.last_name }}</h2>

        <div class="row">
            <div class="col-lg-8 mx-auto">
                <form method="POST" action="{{ url_for('new_blood_data', id=patient.id) }}" class="needs-validation" novalidate>
                    <!-- Date d'analyse -->
                    <div class="mb-3">
                        <label for="date_analyse" class="form-label">Date d'analyse</label>
                        <input type="datetime-local" class="form-control" id="date_analyse"
                               name="date_analyse" value="{{ request.form.date_analyse }}">
                    </div>

                    <div class="row g-3">
                        <!-- Première colonne -->
                        <div class="col-md-6">
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Hémoglobine</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['hemoglobine'][patient.gender]['min'] }}-{{ limits['hemoglobine'][patient.gender]['max'] }} {{ limits['hemoglobine']['unit'] }}" name="hemoglobine"
                                       value="{{ request.form.hemoglobine }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Hématocrite</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['hematocrite'][patient.gender]['min'] }}-{{ limits['hematocrite'][patient.gender]['max'] }} {{ limits['hematocrite']['unit'] }}" name="hematocrite"
                                       value="{{ request.form.hematocrite }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Leucocytes</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['globules_blancs'][patient.gender]['min'] }}-{{ limits['globules_blancs'][patient.gender]['max'] }} {{ limits['globules_blancs']['unit'] }}" name="globules_blancs"
                                       value="{{ request.form.globules_blancs }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Hématies</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['globules_rouges'][patient.gender]['min'] }}-{{ limits['globules_rouges'][patient.gender]['max'] }} {{ limits['globules_rouges']['unit'] }}" name="globules_rouges"
                                       value="{{ request.form.globules_rouges }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Plaquettes</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['plaquettes'][patient.gender]['min'] }}-{{ limits['plaquettes'][patient.gender]['max'] }} {{ limits['plaquettes']['unit'] }}" name="plaquettes"
                                       value="{{ request.form.plaquettes }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Créatinine</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['creatinine'][patient.gender]['min'] }}-{{ limits['creatinine'][patient.gender]['max'] }} {{ limits['creatinine']['unit'] }}" name="creatinine"
                                       value="{{ request.form.creatinine }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">CKD-EPI</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['ckd_epi'][patient.gender]['min'] }}-{{ limits['creatinine'][patient.gender]['max'] }} {{ limits['ckd_epi']['unit'] }}" name="ckd_epi"
                                       value="{{ request.form.ckd_epi }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Urée - Acide urique</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['uree'][patient.gender]['min'] }}-{{ limits['uree'][patient.gender]['max'] }} {{ limits['uree']['unit'] }}" name="uree"
                                       value="{{ request.form.uree }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Glycémie</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['glycemie'][patient.gender]['min'] }}-{{ limits['glycemie'][patient.gender]['max'] }} {{ limits['glycemie']['unit'] }}" name="glycemie"
                                       value="{{ request.form.glycemie }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Cholestérol Total</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['cholesterol_total'][patient.gender]['min'] }}-{{ limits['cholesterol_total'][patient.gender]['max'] }} {{ limits['cholesterol_total']['unit'] }}" name="cholesterol_total"
                                       value="{{ request.form.cholesterol_total }}">
                            </div>
                        </div>

                        <!-- Deuxième colonne -->
                        <div class="col-md-6">
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">HDL-Cholestérol</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['hdl'][patient.gender]['min'] }}-{{ limits['hdl'][patient.gender]['max'] }} {{ limits['hdl']['unit'] }}" name="hdl"
                                       value="{{ request.form.hdl }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">LDL-Cholestérol</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['ldl'][patient.gender]['min'] }}-{{ limits['ldl'][patient.gender]['max'] }} {{ limits['ldl']['unit'] }}"
                                       name="ldl"
                                       value="{{ request.form.ldl }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Triglycérides</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['triglycerides'][patient.gender]['min'] }}-{{ limits['triglycerides'][patient.gender]['max'] }} {{ limits['triglycerides']['unit'] }}" name="triglycerides"
                                       value="{{ request.form.triglycerides }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">TSH-Thyroïde</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['tsh'][patient.gender]['min'] }}-{{ limits['tsh'][patient.gender]['max'] }} {{ limits['tsh']['unit'] }}" name="tsh"
                                       value="{{ request.form.tsh }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">PSA</label>
                                </div>
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="{{ limits['psa'][patient.gender]['min'] }}-{{ limits['psa'][patient.gender]['max'] }} {{ limits['psa']['unit'] }}" name="psa"
                                       value="{{ request.form.psa }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">ALT - SGPT</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['alt'][patient.gender]['min'] }}-{{ limits['alt'][patient.gender]['max'] }} {{ limits['alt']['unit'] }}" name="alt"
                                       value="{{ request.form.alt }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">AST - SGOT</label>
                                </div>
                                <input type="number" class="form-control"
                                       placeholder="{{ limits['ast'][patient.gender]['min'] }}-{{ limits['ast'][patient.gender]['max'] }} {{ limits['ast']['unit'] }}" name="ast"
                                       value="{{ request.form.ast }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Fer</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['fer'][patient.gender]['min'] }}-{{ limits['fer'][patient.gender]['max'] }} {{ limits['fer']['unit'] }}" name="fer"
                                       value="{{ request.form.fer }}">
                            </div>
                            <div class="mb-3">
                                <div class="d-flex flex-column align-items-center text-center">
                                    <label class="form-label mb-0">Vitamine D</label>
                                </div>
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="{{ limits['vitamine_d'][patient.gender]['min'] }}-{{ limits['vitamine_d'][patient.gender]['max'] }} {{ limits['vitamine_d']['unit'] }}" name="vitamine_d"
                                       value="{{ request.form.vitamine_d }}">
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary">Valider</button>
                    </div>
                </form>

                {% if error %}
                <div class="alert alert-danger mt-3" role="alert">
                    <strong>Erreur:</strong> {{ error }}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</main>
<style>
.container-fluid {
    max-width: 1920px;
    margin: 0 auto;
}

.form-label {
    font-weight: 500;
}

.text-muted {
    font-size: 0.85em;
}

@media (max-width: 768px) {
    .container-fluid {
        padding: 0.5rem;
    }

    .row {
        margin: 0;
    }

    .col-md-3 {
        padding: 0.5rem;
    }
}
</style>
{% endblock main %}