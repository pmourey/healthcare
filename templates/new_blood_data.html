<!-- healthcare/templates/new_blood_data.html -->

{% extends 'base.html' %}
{% include './partials/_menu.html' %}


{% block main %}
<main>
    <div class="container py-4">
        <h2 class="mb-4">Analyses sanguines - {{ patient.first_name }} {{ patient.last_name }}</h2>

        <div class="row">
            <div class="col-lg-8 mx-auto">
                <form method="POST" action="{{ url_for('new_blood_data', id=patient.id) }}" class="needs-validation" novalidate>
                    <!-- Date d'analyse -->
                    <div class="mb-3">
                        <label for="date_analyse" class="form-label">Date d'analyse</label>
                        <input type="datetime-local" class="form-control" id="date_analyse"
                               name="date_analyse" value="{{ request.form.date_analyse }}">
                    </div>

                    <div class="row g-3">
                        <!-- Première colonne -->
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="Hémoglobine (g/dL)" name="hemoglobine"
                                       value="{{ request.form.hemoglobine }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="Hématocrite (%)" name="hematocrite"
                                       value="{{ request.form.hematocrite }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="Leucocytes (/mm3)" name="globules_blancs"
                                       value="{{ request.form.globules_blancs }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="Hématies (/mm3)" name="globules_rouges"
                                       value="{{ request.form.globules_rouges }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="Plaquettes (/mm3)" name="plaquettes"
                                       value="{{ request.form.plaquettes }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="Créatinine (mg/L)" name="creatinine"
                                       value="{{ request.form.creatinine }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="Urée - Acide urique (mg/L)" name="uree"
                                       value="{{ request.form.uree }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="Glycémie (g/L)" name="glycemie"
                                       value="{{ request.form.glycemie }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="Cholestérol Total (g/L)" name="cholesterol_total"
                                       value="{{ request.form.cholesterol_total }}">
                            </div>
                        </div>

                        <!-- Deuxième colonne -->
                        <div class="col-md-6">
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="HDL-Cholestérol (g/L)" name="hdl"
                                       value="{{ request.form.hdl }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="LDL-Cholestérol (g/L)" name="ldl"
                                       value="{{ request.form.ldl }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="Triglycérides (g/L)" name="triglycerides"
                                       value="{{ request.form.triglycerides }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="TSH-Thyroïde (mUI/L)" name="tsh"
                                       value="{{ request.form.tsh }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.01" class="form-control"
                                       placeholder="PSA (ng/mL)" name="psa"
                                       value="{{ request.form.psa }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="ALT - SGPT (UI/L)" name="alt"
                                       value="{{ request.form.alt }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control"
                                       placeholder="AST - SGOT (UI/L)" name="ast"
                                       value="{{ request.form.ast }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="Fer (µg/dL)" name="fer"
                                       value="{{ request.form.fer }}">
                            </div>
                            <div class="mb-3">
                                <input type="number" step="0.1" class="form-control"
                                       placeholder="Vitamine D (ng/mL)" name="vitamine_d"
                                       value="{{ request.form.vitamine_d }}">
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-primary">Valider</button>
                    </div>
                </form>

                {% if error %}
                <div class="alert alert-danger mt-3" role="alert">
                    <strong>Erreur:</strong> {{ error }}
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</main>
{% endblock main %}